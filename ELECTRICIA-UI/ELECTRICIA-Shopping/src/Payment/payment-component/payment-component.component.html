<!-- Breadcrumb -->
<div class="breadcrumb">
  <div class="container">
    <div class="breadcrumb__title">
      <h1>Checkout</h1>
      <ul>
        <li><a href="/">Home</a></li>
        <li class="color__blue">Checkout</li>
      </ul>
    </div>
  </div>
</div>

<!-- Checkout Content -->
<div class="checkoutarea sp_bottom_100 sp_top_100">
  <div class="container">
    <div class="row">

      <!-- Left Column: Billing -->
      <div class="col-lg-6 col-md-12">
        <div *ngIf="!loginServices.IsLogin()" class="mt-3 mb-3">
              <p style="font-weight: bold;">
                Already have an account?
                <a (click)="!loginServices.IsLogin()" style="color: #007bff; text-decoration: underline;cursor: pointer;">Login here</a>

              </p>
            </div>


        <div class="checkoutarea__billing" *ngIf="!loginServices.IsLogin()">
          <div class="checkoutarea__billing__heading">
            <h2>Billing Details</h2>
          </div>

        <form #checkoutForm="ngForm" >
            <div class="row">
              <div class="col-xl-6">
                <div class="checkoutarea__inputbox">
                  <label>First Name *</label>
                  <input type="text" class="form-control" name="firstName" required ngModel />
                </div>
              </div>

              <div class="col-xl-6">
                <div class="checkoutarea__inputbox">
                  <label>Last Name *</label>
                  <input type="text" class="form-control" name="lastName" required ngModel />
                </div>
              </div>

              <div class="col-xl-12">
                <div class="checkoutarea__inputbox">
                  <label>Email *</label>
                  <input type="email" class="form-control" name="email" required ngModel />
                </div>
              </div>

              <div class="col-xl-12">
                <div class="checkoutarea__inputbox">
                  <label>Phone *</label>
                  <input type="text" class="form-control" name="phone" required ngModel />
                </div>
              </div>

              <div class="col-xl-12">
                <div class="checkoutarea__inputbox">
                  <label>Address *</label>
                  <input type="text" class="form-control" name="address" required ngModel />
                </div>
              </div>

              <div class="col-xl-6">
                <div class="checkoutarea__inputbox">
                  <label>City *</label>
                  <input type="text" class="form-control" name="city" required ngModel />
                </div>
              </div>

              <div class="col-xl-6">
                <div class="checkoutarea__inputbox">
                  <label>Postal Code *</label>
                  <input type="text" class="form-control" name="postalCode" required ngModel />
                </div>
              </div>
            </div>

            <!-- Login prompt for guests -->
            
          </form>
        </div>

        <!-- ✅ Billing Form for Logged-in User -->
      <div class="checkoutarea__billing" *ngIf="loginServices.IsLogin()">
        <div class="checkoutarea__billing__heading">
          <h2>Billing Details</h2>
        </div>

        <form #billingForm="ngForm">
          <div class="row">
            <!-- First Name -->
            <div class="col-xl-6">
              <div class="checkoutarea__inputbox">
                <label>First Name *</label>
                <input
                  type="text"
                  class="form-control"
                  name="firstName"
                  [(ngModel)]="userData.firstName"
                  required
                />
              </div>
            </div>

            <!-- Last Name -->
            <div class="col-xl-6">
              <div class="checkoutarea__inputbox">
                <label>Last Name *</label>
                <input
                  type="text"
                  class="form-control"
                  name="lastName"
                  [(ngModel)]="userData.lastName"
                  required
                />
              </div>
            </div>

            <!-- Email -->
            <div class="col-xl-12">
              <div class="checkoutarea__inputbox">
                <label>Email *</label>
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  [(ngModel)]="userData.email"
                  required
                />
              </div>
            </div>

            <!-- Phone -->
            <div class="col-xl-12">
              <div class="checkoutarea__inputbox">
                <label>Phone *</label>
                <input
                  type="text"
                  class="form-control"
                  name="phone"
                  [(ngModel)]="userData.phone"
                  required
                />
              </div>
            </div>

            <!-- Address -->
            <div class="col-xl-12">
              <div class="checkoutarea__inputbox">
                <label>Address *</label>
                <input
                  type="text"
                  class="form-control"
                  name="address"
                  [(ngModel)]="userData.address"
                  required
                />
              </div>
            </div>

            <!-- City -->
            <div class="col-xl-6">
              <div class="checkoutarea__inputbox">
                <label>City *</label>
                <input
                  type="text"
                  class="form-control"
                  name="city"
                  [(ngModel)]="userData.city"
                  required
                />
              </div>
            </div>

            <!-- Postal Code -->
            <div class="col-xl-6">
              <div class="checkoutarea__inputbox">
                <label>Postal Code *</label>
                <input
                  type="text"
                  class="form-control"
                  name="postalCode"
                  [(ngModel)]="userData.postalCode"
                  required
                />
              </div>
            </div>
          </div>
        </form>
      </div>

      </div>

      <!-- Right Column: Cart + Payment -->
      <div class="col-lg-6 col-md-12">
        <div class="checkoutarea__payment__wraper">
          <div class="checkoutarea__total">
            <h3>Your Order</h3>

            <div class="checkoutarea__table__wraper" style="overflow-x:auto;">
              <table class="checkoutarea__table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of product">
                    <td>{{ item.productName }}</td>
                    <td>₹{{ item.price }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>₹{{ item.price * item.quantity }}</td>
                  </tr>
                  <tr>
                    <td colspan="3" class="text-end fw-bold">Grand Total</td>
                    <td class="fw-bold">₹{{ totalAmount }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Payment -->
            <div class="checkoutarea__payment mt-4">
              <form (ngSubmit)="pay()">
                <div class="mb-3">
                  <label>Cardholder Name</label>
                  <input
                    type="text"
                    id="cardholder-name"
                    class="form-control"
                    placeholder="Name on Card"
                    required
                  />
                </div>

                <div
                  id="payment-element"
                  class="mb-3"
                  style="border: 1px solid #ccc; padding: 12px; border-radius: 4px;"
                ></div>

                <button type="submit" class="default__button w-100">
                  Pay ₹{{ totalAmount }}
                </button>
              </form>
            </div>

          </div>
        </div>
      </div>


    </div>
  </div>
</div>
